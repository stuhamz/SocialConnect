# AbbasiConnect Environment Variables
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Get these from: https://app.supabase.com/project/_/settings/api

# Your Supabase project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Your Supabase anon/public key (safe to expose in browser)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Your Supabase service role key (NEVER expose in browser, server-side only)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# EMAIL PROVIDER (Choose ONE)
# =============================================================================

# Option 1: BREVO (Recommended - 300 emails/day free)
# Get API key from: https://app.brevo.com/settings/keys/api
BREVO_API_KEY=your-brevo-api-key-here
EMAIL_FROM=noreply@abbasiconnect.com
EMAIL_FROM_NAME=AbbasiConnect

# Option 2: RESEND (Alternative - 3,000/month, 100/day free)
# Get API key from: https://resend.com/api-keys
# RESEND_API_KEY=re_your-resend-api-key-here
# EMAIL_FROM=noreply@abbasiconnect.com
# EMAIL_FROM_NAME=AbbasiConnect

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Base URL of your application (for emails and redirects)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Environment (development, staging, production)
NODE_ENV=development

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Secret key for session token hashing (generate with: openssl rand -base64 32)
SESSION_SECRET=your-random-secret-key-here-min-32-chars

# JWT secret for additional token signing (generate with: openssl rand -base64 32)
JWT_SECRET=your-jwt-secret-here-min-32-chars

# =============================================================================
# RATE LIMITING (Optional - uses Upstash Redis)
# =============================================================================
# Get from: https://console.upstash.com/

# UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# =============================================================================
# ANALYTICS (Optional - Self-hosted)
# =============================================================================

# Umami Analytics
# NEXT_PUBLIC_UMAMI_WEBSITE_ID=your-website-id
# NEXT_PUBLIC_UMAMI_URL=https://analytics.yourdomain.com

# =============================================================================
# WEB PUSH NOTIFICATIONS (Optional - for PWA)
# =============================================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys

# NEXT_PUBLIC_VAPID_PUBLIC_KEY=your-vapid-public-key
# VAPID_PRIVATE_KEY=your-vapid-private-key
# VAPID_SUBJECT=mailto:admin@abbasiconnect.com

# =============================================================================
# CLOUDFLARE (Optional - for R2 storage)
# =============================================================================
# Get from: https://dash.cloudflare.com/

# CLOUDFLARE_ACCOUNT_ID=your-account-id
# CLOUDFLARE_R2_ACCESS_KEY_ID=your-access-key-id
# CLOUDFLARE_R2_SECRET_ACCESS_KEY=your-secret-access-key
# CLOUDFLARE_R2_BUCKET_NAME=abbasiconnect-media
# CLOUDFLARE_R2_PUBLIC_URL=https://media.abbasiconnect.com

# =============================================================================
# PHONE VERIFICATION (Optional - for SMS OTP)
# =============================================================================

# MSG91 (India-focused, cheap SMS)
# MSG91_AUTH_KEY=your-msg91-auth-key
# MSG91_SENDER_ID=ABBASI
# MSG91_TEMPLATE_ID=your-template-id

# Exotel (Missed call verification)
# EXOTEL_API_KEY=your-exotel-api-key
# EXOTEL_API_TOKEN=your-exotel-api-token
# EXOTEL_SID=your-exotel-sid

# =============================================================================
# MONITORING & ERROR TRACKING (Optional)
# =============================================================================

# Sentry
# NEXT_PUBLIC_SENTRY_DSN=your-sentry-dsn
# SENTRY_AUTH_TOKEN=your-sentry-auth-token

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
NEXT_PUBLIC_ENABLE_COMMENTS=true
NEXT_PUBLIC_ENABLE_IMAGE_UPLOAD=true
NEXT_PUBLIC_ENABLE_HELP_HUB=true
NEXT_PUBLIC_ENABLE_GROUPS=true
NEXT_PUBLIC_ENABLE_EVENTS=true
NEXT_PUBLIC_ENABLE_MATRIMONY=false
NEXT_PUBLIC_ENABLE_DONATIONS=false

# =============================================================================
# LIMITS & QUOTAS
# =============================================================================

# Rate limits
MAX_OTP_REQUESTS_PER_15MIN=5
MAX_POSTS_PER_DAY=3
MAX_COMMENTS_PER_HOUR=20
MAX_HELP_REQUESTS_PER_WEEK=2

# File upload limits
MAX_IMAGE_SIZE_MB=5
MAX_IMAGES_PER_POST=4
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp

# Text limits
MAX_POST_LENGTH=5000
MAX_COMMENT_LENGTH=1000
MAX_BIO_LENGTH=500

# =============================================================================
# VOUCH SYSTEM
# =============================================================================

# Number of vouches required for verification
REQUIRED_VOUCHES=3

# Days to wait before restricting unvouched accounts
VOUCH_TIMEOUT_DAYS=14

# =============================================================================
# TRUST SCORE WEIGHTS
# =============================================================================

TRUST_SCORE_PROFILE_COMPLETE=10
TRUST_SCORE_VOUCH_GIVEN=5
TRUST_SCORE_HELP_COMPLETED=15
TRUST_SCORE_POST_CREATED=2
TRUST_SCORE_COMMENT_HELPFUL=1
TRUST_SCORE_REPORT_UPHELD=-20

# =============================================================================
# CRON JOBS (If using Vercel Cron or similar)
# =============================================================================

# Cron secret for securing cron endpoints
CRON_SECRET=your-cron-secret-here

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Skip email sending in development (logs to console instead)
SKIP_EMAIL_SEND=false

# Mock OTP for testing (use "123456" for any email)
MOCK_OTP_ENABLED=false

# Disable rate limiting in development
DISABLE_RATE_LIMITING=false

# Enable debug logging
DEBUG=false

# =============================================================================
# NOTES
# =============================================================================

# 1. NEVER commit .env.local to git
# 2. Generate strong random secrets for SESSION_SECRET and JWT_SECRET
# 3. Use different secrets for development, staging, and production
# 4. Rotate secrets periodically
# 5. Keep service role keys secure - they bypass RLS
# 6. Test email delivery before going to production
# 7. Set up proper DNS records (SPF, DKIM, DMARC) for email
# 8. Monitor rate limits and adjust as needed
# 9. Enable monitoring in production
# 10. Back up your Supabase database regularly

# =============================================================================
# QUICK START
# =============================================================================

# 1. Copy this file:
#    cp .env.example .env.local

# 2. Create Supabase project:
#    - Go to https://app.supabase.com
#    - Create new project
#    - Copy URL and keys

# 3. Set up email provider:
#    - Brevo: https://app.brevo.com (recommended)
#    - OR Resend: https://resend.com

# 4. Generate secrets:
#    openssl rand -base64 32

# 5. Fill in the values above

# 6. Run database migrations:
#    - Execute packages/db/schema.sql in Supabase SQL editor
#    - Execute packages/db/rls-policies.sql
#    - Execute packages/db/seed.sql

# 7. Start development:
#    npm run dev

# =============================================================================
